# 游戏重构测试清单

在替换 `game.js` 之前，请按照以下清单进行全面测试，确保所有功能正常工作。

## 1. 基础功能测试

- [ ] **进入房间**

  - [ ] 能正常加载房间数据
  - [ ] 玩家列表显示正确
  - [ ] 手牌、森林、空地、牌堆数量显示正确
  - [ ] 指引文案显示正常

- [ ] **实时同步 (Watcher)**

  - [ ] 其他玩家的操作能实时反馈到当前界面
  - [ ] 游戏状态更新（如回合切换）能自动触发
  - [ ] 断线重连功能是否正常

- [ ] **界面显示 (Display)**
  - [ ] 点击玩家头像切换视角
  - [ ] 左右滑动切换玩家森林
  - [ ] 手牌区域左滑/右滑展开/收起
  - [ ] 点击卡片显示详情 (手牌、森林、空地)
  - [ ] 点击森林堆叠卡片显示列表

## 2. 交互与操作测试

- [ ] **抽牌 (Draw)**

  - [ ] 点击牌堆能抽两张牌
  - [ ] 抽牌动画正常
  - [ ] 冬季卡逻辑：抽到第 3 张冬季卡不仅结束游戏，还要能触发结束动画

- [ ] **从空地拿牌 (Take)**

  - [ ] 点击空地卡片选中
  - [ ] 再次点击取消选中
  - [ ] 确认拿牌后手牌增加，空地减少
  - [ ] 消耗步数计算正确

- [ ] **打出树苗 (Sapling)**

  - [ ] 点击手牌选中
  - [ ] 点击"打出树苗"按钮
  - [ ] 确认后手牌减少，森林增加树苗
  - [ ] 奖励触发正常 (可能获得抽牌)

- [ ] **普通出牌 (Play Normal)**

  - [ ] **打出树木**

    - [ ] 选中手牌中的树木卡
    - [ ] 支付相应费用的卡牌
    - [ ] 确认出牌，树木进入森林
    - [ ] 奖励计算正确 (Bonus/Effect)

  - [ ] **打出物种卡 (上下左右)**

    - [ ] 选中手牌中的物种卡
    - [ ] 选中森林中合法的树木插槽
    - [ ] 支付费用
    - [ ] 确认出牌，卡片进入指定插槽
    - [ ] 奖励计算正确

  - [ ] **堆叠规则**
    - [ ] 同名卡无法放入同一插槽 (除非有能力支持)
    - [ ] 刺荨麻等特殊卡片的堆叠逻辑

## 3. 特殊行动测试

- [ ] **大蟾蜍叠放 (Tuck)**

  - [ ] 触发大蟾蜍行动模式
  - [ ] 选中一张手牌
  - [ ] 确认叠放，手牌消失，大蟾蜍下增加卡片
  - [ ] 奖励/分数计算正确

- [ ] **浣熊行动 (Raccoon)**

  - [ ] 触发浣熊行动模式
  - [ ] 选中空地卡片或使用手牌
  - [ ] 确认后卡片进入洞穴
  - [ ] 触发额外的抽牌奖励

- [ ] **空地拿牌 (Clearing Pick)**
  - [ ] 触发特定卡牌效果 (如蚊子、蝙蝠)
  - [ ] 从空地拿牌到手牌或洞穴
  - [ ] 流程结束后恢复正常状态

## 4. 事件与动画测试

- [ ] **事件队列**

  - [ ] 多个事件依次播放 (如: 抽牌 -> 触发奖励 -> 回合结束)
  - [ ] 动画播放流畅，无卡顿
  - [ ] 提示 Toast 显示正常

- [ ] **回合切换**
  - [ ] 结束回合后，activePlayer 变更
  - [ ] 轮到自己时有提示

## 5. 调试金手指

- [ ] 打开金手指面板
- [ ] 搜索并添加卡片
- [ ] 确认卡片成功添加到手牌

## 6. 异常处理

- [ ] **错误操作**

  - [ ] 费用不足时尝试出牌
  - [ ] 插槽已满时尝试出牌
  - [ ] 不是自己回合尝试操作
  - [ ] 步数用完后尝试操作

- [ ] **边界情况**
  - [ ] 手牌满 10 张时尝试抽牌/拿牌
  - [ ] 空地满 10 张自动清空逻辑
  - [ ] 牌堆抽空后的处理

---

如果在测试中发现任何问题，请记录并在对应模块中进行修复。
