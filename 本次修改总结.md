# æœ¬æ¬¡ä¿®æ”¹æ€»ç»“

## 1. ç‰Œåº“æ•°é‡é…ç½®ä¿®æ­£ âœ…

### é—®é¢˜

é»˜è®¤ç‰Œåº“æ•°é‡é…ç½®ä¸æ­£ç¡®,æ²¡æœ‰æœ€å¤§å€¼é™åˆ¶ã€‚

### ä¿®æ”¹

- **BASE_DECK_SIZE**: 236 â†’ 233 (230 å¼ æ™®é€šå¡ + 3 å¼ å†¬å­£å¡)
- **MAX_DECK_SIZE**: æ–°å¢ 693 (230Ã—3 + 3)
- **é»˜è®¤å€¼**: 236 â†’ 233
- **è¾“å…¥éªŒè¯**: æ·»åŠ æœ€å¤§å€¼ 693 çš„é™åˆ¶å’Œæç¤º

**æ–‡ä»¶**:

- `miniprogram/data/constants.js`
- `miniprogram/pages/lobby/lobby.js`
- `miniprogram/pages/lobby/lobby.wxml`

---

## 2. å¥–åŠ±æ’­æŠ¥ä¼˜åŒ– âœ…

### é—®é¢˜

æœªæ»¡è¶³æ¡ä»¶çš„å¥–åŠ±ä¹Ÿä¼šæ˜¾ç¤ºåœ¨æ’­æŠ¥ä¸­,é€ æˆä¿¡æ¯å†—ä½™ã€‚

### ä¿®æ”¹

åªæœ‰åœ¨å¥–åŠ±çœŸæ­£è§¦å‘æ—¶(æœ‰å®é™…æ•ˆæœ)æ‰æ˜¾ç¤º `bonusText` å’Œ `effectText`ã€‚

**åˆ¤æ–­æ¡ä»¶**:

```javascript
bonus.drawCount > 0 || bonus.extraTurn || bonus.actions.length > 0;
```

**æ–‡ä»¶**: `miniprogram/pages/game/game.js` (3 å¤„ä¿®æ”¹)

---

## 3. æ‘¸ç‰Œ/æ‹¿ç‰Œåå–æ¶ˆé€‰ä¸­ âœ…

### é—®é¢˜

æ‘¸ç‰Œæˆ–æ‹¿ç‰Œå,ç‰Œåº“/ç©ºåœ°å¡ç‰Œçš„é€‰ä¸­çŠ¶æ€æ²¡æœ‰æ¸…é™¤,å¯¼è‡´ UI æ··æ·†ã€‚

### ä¿®æ”¹

åœ¨ `executeDrawFromDeck()` å’Œ `onConfirmTake()` ä¸­æ·»åŠ :

```javascript
this.setData({ selectedClearingIdx: -1 });
```

**æ–‡ä»¶**: `miniprogram/pages/game/game.js`

---

## 4. å›åˆåˆ‡æ¢äº‹ä»¶é¡ºåºä¿®å¤ âœ…

### é—®é¢˜

å¤šäººæ¨¡å¼ä¸‹,å…ˆæ˜¾ç¤ºå›åˆåˆ‡æ¢æç¤º,åæ˜¾ç¤ºä¸Šä¸€å›åˆçš„æ“ä½œ,é¡ºåºé”™è¯¯ã€‚

### ä¿®æ”¹

ç»™ `TURN_CHANGE` äº‹ä»¶æ·»åŠ  +1000ms çš„ timestamp åç§»:

```javascript
timestamp: Date.now() + 1000;
```

**åŸç†**: ç¡®ä¿å›åˆåˆ‡æ¢äº‹ä»¶çš„ timestamp å¤§äºä¸Šä¸€å›åˆæ‰€æœ‰äº‹ä»¶,ä»è€Œæ’åœ¨é˜Ÿåˆ—æœ€åã€‚

**æ–‡ä»¶**: `miniprogram/pages/game/game.js`

---

## 5. åˆ‡æ¢æ£®æ—å¡é¡¿ä¿®å¤ âœ…

### é—®é¢˜

ç‚¹å‡»ç©å®¶å¤´åƒåˆ‡æ¢æŸ¥çœ‹æ£®æ—æ—¶è§¦å‘æ•°æ®åº“æŸ¥è¯¢,å¯¼è‡´å¡é¡¿(160-750ms)ã€‚

### ä¿®æ”¹

æ”¹ä¸ºçº¯æœ¬åœ°æ“ä½œ,ç›´æ¥ä» `playerStates` è·å–æ•°æ®:

```javascript
const viewingPlayerState = this.data.playerStates?.[opid];
const displayForest = viewingPlayerState?.forest || [];
// ç›´æ¥æ›´æ–°UI,ä¸è°ƒç”¨ queryGameData
```

**æ€§èƒ½æå‡**: 16-75 å€! (ä» 160-750ms é™è‡³ <10ms)

**æ–‡ä»¶**: `miniprogram/pages/game/game.js`

---

## 6. ç©å®¶åˆ—è¡¨å®½åº¦è°ƒæ•´ âœ…

### é—®é¢˜

ç©å®¶æ§½ä½å®½åº¦ä¸å¤Ÿ,åˆ†æ•°æ˜¾ç¤ºä¸ä¸‹(å°¤å…¶æ˜¯ä¸‰ä½æ•°)ã€‚

### ä¿®æ”¹

å¢åŠ  `.player-slot` å®½åº¦:

```css
width: 165rpx â†’ 180rpx;
```

**æ–‡ä»¶**: `miniprogram/pages/game/game.wxss`

---

## æ€»è®¡ä¿®æ”¹

- **6 ä¸ªé—®é¢˜**å…¨éƒ¨ä¿®å¤ âœ…
- **5 ä¸ªæ–‡ä»¶**è¢«ä¿®æ”¹:
  - `miniprogram/data/constants.js`
  - `miniprogram/pages/lobby/lobby.js`
  - `miniprogram/pages/lobby/lobby.wxml`
  - `miniprogram/pages/game/game.js`
  - `miniprogram/pages/game/game.wxss`
- **åˆ›å»ºæ–‡æ¡£**: 6 ä¸ªè¯´æ˜æ–‡æ¡£

## æ€§èƒ½ä¼˜åŒ–äº®ç‚¹

1. **åˆ‡æ¢æ£®æ—**: æ€§èƒ½æå‡ 16-75 å€ ğŸš€
2. **äº‹ä»¶é¡ºåº**: ç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„ âœ¨
3. **UI å“åº”**: æ‘¸ç‰Œ/æ‹¿ç‰Œå³æ—¶åé¦ˆ âš¡

## ç”¨æˆ·ä½“éªŒæ”¹å–„

1. âœ… ç‰Œåº“æ•°é‡é…ç½®æ›´å‡†ç¡®
2. âœ… æ’­æŠ¥ä¿¡æ¯æ›´ç²¾å‡†
3. âœ… UI çŠ¶æ€æ›´æ¸…æ™°
4. âœ… äº‹ä»¶é¡ºåºæ›´åˆç†
5. âœ… æ“ä½œå“åº”æ›´æµç•…
6. âœ… ç•Œé¢æ˜¾ç¤ºæ›´å®Œæ•´
