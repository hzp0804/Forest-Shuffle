# 奖励播报优化

## 问题描述

之前的播报系统会显示所有卡牌的奖励和效果文本,即使这些奖励没有实际触发。例如:

- 没有颜色匹配的 bonus 也会显示
- 没有满足条件的 effect 也会显示

这导致播报信息冗余,容易误导玩家。

## 解决方案

修改了播报事件的奖励文本设置逻辑,只有在奖励真正触发时才设置 `bonusText` 和 `effectText`。

### 判断条件

奖励被认为"真正触发"的条件:

```javascript
// Bonus 触发条件
bonus.drawCount > 0 || bonus.extraTurn || bonus.actions.length > 0;

// Effect 触发条件
effect.drawCount > 0 || effect.extraTurn || effect.actions.length > 0;
```

### 修改位置

在 `game.js` 的三个位置更新了 `lastEvent` 的设置:

1. **特殊模式下的出牌** (第 1074-1085 行)
2. **有特殊行动的出牌** (第 1266-1278 行)
3. **普通出牌** (第 1401-1412 行)

### 修改前

```javascript
bonusText: primaryCard.bonus || null,
effectText: primaryCard.effect || null,
```

### 修改后

```javascript
// 只有在奖励真正触发时才显示文本
bonusText: (bonus.drawCount > 0 || bonus.extraTurn || bonus.actions.length > 0)
  ? (primaryCard.bonus || null)
  : null,
effectText: (effect.drawCount > 0 || effect.extraTurn || effect.actions.length > 0)
  ? (primaryCard.effect || null)
  : null,
```

## 效果

- ✅ 未满足条件的奖励不再显示在播报中
- ✅ 只有实际触发的奖励才会显示
- ✅ 触发效果(triggers)保持不变,继续正常显示
- ✅ 播报信息更加精准,不会误导玩家

## 示例

### 场景 1: 颜色不匹配

- **卡牌**: 有 bonus "摸 1 张牌"
- **支付**: 颜色不匹配
- **播报**: 不显示 bonus (因为没有触发)

### 场景 2: 颜色匹配

- **卡牌**: 有 bonus "摸 1 张牌"
- **支付**: 颜色匹配
- **播报**: 显示 "🎁 奖励: 摸 1 张牌"

### 场景 3: 常驻效果触发

- **卡牌**: 打出带蝙蝠标签的卡
- **森林**: 有卡牌监听蝙蝠标签
- **播报**: 显示 "⚡ 触发【XXX】: 摸 X 张牌"
